# ViTransfer Environment Configuration
# Copy this file to .env and update with your values

# ============================================
# Application Port
# ============================================
# Port to expose on the host
APP_PORT=4321

# ============================================
# User/Group ID Mapping (Linux only)
# ============================================
# PUID and PGID allow containers to run with your host user's permissions
# Find your values with: id $USER
PUID=1000
PGID=1000

# ============================================
# Timezone Configuration
# ============================================
# CRITICAL for notification schedules to work correctly
# Format: Region/City (see https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)
# Examples: Europe/Amsterdam, America/New_York, Asia/Tokyo
TZ=UTC

# ============================================
# Database Configuration (PostgreSQL)
# ============================================
# IMPORTANT: Use alphanumeric passwords only (no special chars like +/=)
# Good: openssl rand -hex 32
# Avoid: openssl rand -base64 32 (contains +/= which break DATABASE_URL)
POSTGRES_USER=vitransfer
POSTGRES_PASSWORD=<<REPLACE_WITH_openssl_rand_hex_32>>
POSTGRES_DB=vitransfer

# ============================================
# Redis Configuration
# ============================================
REDIS_PASSWORD=<<REPLACE_WITH_openssl_rand_hex_32>>

# ============================================
# Security Keys (REQUIRED!)
# ============================================
# These can use base64 (not used in URLs)
# openssl rand -base64 32
# openssl rand -base64 64

ENCRYPTION_KEY=<<REPLACE_WITH_openssl_rand_base64_32>>
JWT_SECRET=<<REPLACE_WITH_openssl_rand_base64_64>>
JWT_REFRESH_SECRET=<<REPLACE_WITH_openssl_rand_base64_64>>
SHARE_TOKEN_SECRET=<<REPLACE_WITH_openssl_rand_base64_64>>

# ============================================
# Admin Credentials (Initial Setup)
# ============================================
# These are used to create the initial admin user
# IMPORTANT: Change these from defaults in production!
# NOTE: Avoid special characters in password (!, @, #, etc.) due to JSON parsing
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=Admin1234

# ============================================
# Application URL (Optional)
# ============================================
# Set your public domain here (configure in admin settings)
# Default: http://localhost:4321
NEXT_PUBLIC_APP_URL=http://localhost:4321
CLOUDFLARE_TUNNEL=false

# If you expose TUS uploads on a separate origin, set NEXT_PUBLIC_TUS_ENDPOINT
# NEXT_PUBLIC_TUS_ENDPOINT=https://uploads.example.com

# ============================================
# HTTPS Enforcement (IMPORTANT!)
# ============================================
# PRECEDENCE: This env var ALWAYS overrides database setting
#
# Database default: true (secure by default)
# Code default: true (secure by default)
# Docker-compose fallback: false (localhost/LAN friendly if not set in .env)
#
# THIS IS YOUR ESCAPE HATCH:
# If you get locked out on localhost, set this to 'false' and restart containers.
# The env var ALWAYS takes precedence over database settings.
#
# When HTTPS is ON (true - RECOMMENDED):
# - HSTS header enabled (forces browser to use HTTPS)
# - Required for: Reverse proxy with HTTPS, production deployments
#
# When HTTPS is OFF (false):
# - HSTS header disabled
# - Use for: Localhost development, internal LAN deployments
#
# Can also be toggled in Admin Settings > Advanced Security Settings
# (but env var always takes precedence if set)
#
# Default: true (secure by default)
HTTPS_ENABLED=true
