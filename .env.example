# ViTransfer Environment Configuration
# Copy this file to .env and update with your values

# ============================================
# Application Port
# ============================================
# Port to expose on the host
APP_PORT=4321

# ============================================
# User/Group ID Mapping (Linux only)
# ============================================
# PUID and PGID allow containers to run with your host user's permissions
# Find your values with: id $USER
PUID=1000
PGID=1000

# ============================================
# Timezone Configuration
# ============================================
# CRITICAL for notification schedules to work correctly
# Format: Region/City (see https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)
# Examples: Europe/Amsterdam, America/New_York, Asia/Tokyo
TZ=UTC

# ============================================
# Database Configuration (PostgreSQL)
# ============================================
# IMPORTANT: Use alphanumeric passwords only (no special chars like +/=)
# Good: openssl rand -hex 32
# Avoid: openssl rand -base64 32 (contains +/= which break DATABASE_URL)
POSTGRES_USER=vitransfer
POSTGRES_PASSWORD=<<REPLACE_WITH_openssl_rand_hex_32>>
POSTGRES_DB=vitransfer

# ============================================
# Redis Configuration
# ============================================
REDIS_PASSWORD=<<REPLACE_WITH_openssl_rand_hex_32>>

# ============================================
# Security Keys (REQUIRED!)
# ============================================
# These can use base64 (not used in URLs)
# openssl rand -base64 32
# openssl rand -base64 64

ENCRYPTION_KEY=<<REPLACE_WITH_openssl_rand_base64_32>>
JWT_SECRET=<<REPLACE_WITH_openssl_rand_base64_64>>
JWT_REFRESH_SECRET=<<REPLACE_WITH_openssl_rand_base64_64>>
SHARE_TOKEN_SECRET=<<REPLACE_WITH_openssl_rand_base64_64>>

# ============================================
# Admin Credentials (REQUIRED - Initial Setup)
# ============================================
# REQUIRED: These credentials are used to create the initial admin user
# The application will NOT start without these values set
#
# SECURITY REQUIREMENTS:
# - ADMIN_EMAIL: Must be a valid email address (REQUIRED)
# - ADMIN_PASSWORD: Must be at least 8 characters long (REQUIRED)
# - ADMIN_NAME: Display name for the admin user (Optional, defaults to "Admin")
# - Avoid special characters in password (!, @, #, etc.) due to JSON parsing
#
# IMPORTANT: These are only used during initial setup when NO admin exists
# After the first admin is created, changing these values has no effect
ADMIN_EMAIL=<<REPLACE_WITH_YOUR_EMAIL>>
ADMIN_PASSWORD=<<REPLACE_WITH_SECURE_PASSWORD>>
ADMIN_NAME=Admin

# ============================================
# Application URL (Optional)
# ============================================
# Set your public domain here (configure in admin settings)
# Default: http://localhost:4321
NEXT_PUBLIC_APP_URL=http://localhost:4321
CLOUDFLARE_TUNNEL=false

# If you expose TUS uploads on a separate origin, set NEXT_PUBLIC_TUS_ENDPOINT
# NEXT_PUBLIC_TUS_ENDPOINT=https://uploads.example.com

# ============================================
# HTTPS Enforcement (IMPORTANT!)
# ============================================
# PRECEDENCE: This env var ALWAYS overrides database setting
#
# Database default: true (secure by default)
# Code default: true (secure by default)
# Docker-compose fallback: false (localhost/LAN friendly if not set in .env)
#
# THIS IS YOUR ESCAPE HATCH:
# If you get locked out on localhost, set this to 'false' and restart containers.
# The env var ALWAYS takes precedence over database settings.
#
# When HTTPS is ON (true - RECOMMENDED):
# - HSTS header enabled (forces browser to use HTTPS)
# - Required for: Reverse proxy with HTTPS, production deployments
#
# When HTTPS is OFF (false):
# - HSTS header disabled
# - Use for: Localhost development, internal LAN deployments
#
# Can also be toggled in Admin Settings > Advanced Security Settings
# (but env var always takes precedence if set)
#
# Default: true (secure by default)
HTTPS_ENABLED=true

# ============================================
# QuickBooks Online (Optional - Pull Only)
# ============================================
# These values are used by the admin-only Sales > Settings > QuickBooks Integration.
# IMPORTANT:
# - Pull-only: ViTransfer will not create/update anything in QuickBooks.
# - Secrets must NOT be committed. Keep these in your local .env.
#
# How to get values:
# - QBO_CLIENT_ID / QBO_CLIENT_SECRET: from Intuit Developer app
# - QBO_REALM_ID: your company ID (realmId)
# - QBO_REFRESH_TOKEN: OAuth2 refresh token (rotates; you may need to update .env after a pull)
#
# If you're using an Intuit sandbox company, set QBO_SANDBOX=true
#
# QBO_CLIENT_ID=
# QBO_CLIENT_SECRET=
# QBO_REALM_ID=
# QBO_REFRESH_TOKEN=
# QBO_SANDBOX=false
# QBO_MINOR_VERSION=75
# Optional: if running behind a proxy or using a different public URL, set the exact redirect URI configured in Intuit:
# e.g. http://localhost:4321/api/sales/quickbooks/auth/callback
# QBO_REDIRECT_URI=
